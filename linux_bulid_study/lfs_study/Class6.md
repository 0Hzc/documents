### ğŸš€ ç¬¬å…­è¯¾ï¼šç¼–è¯‘å™¨çš„æ ¸å¿ƒ â€”â€” GCC (Pass 1)

**è¿™æ˜¯ LFS ç¬¬ä¸€é˜¶æ®µä¸­æœ€å¤æ‚ã€æœ€å®¹æ˜“ç¿»è½¦çš„ä¸€æ­¥ã€‚**

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º GCC æå…¶åºå¤§ï¼Œè€Œä¸”å®ƒåƒä¸ªâ€œè´ªåƒè›‡â€ï¼Œéœ€è¦ä¾èµ–ä¸‰ä¸ªæ•°å­¦åº“æ‰èƒ½å·¥ä½œï¼š**GMP, MPFR, MPC**ã€‚

åœ¨æ™®é€šçš„ Ubuntu ä¸Šï¼Œæˆ‘ä»¬ç›´æ¥ `apt install` è¿™äº›åº“å°±è¡Œäº†ã€‚ä½†åœ¨ LFS çš„è’åŸä¸Šï¼Œæˆ‘ä»¬å¿…é¡»ï¼š

1.  è§£å‹ GCC æºç ã€‚
2.  è§£å‹ GMP, MPFR, MPC æºç ã€‚
3.  **æŠŠè¿™ä¸‰ä¸ªåº“çš„æºç æ¬è¿› GCC çš„æºç ç›®å½•é‡Œ**ï¼Œå¹¶é‡å‘½åã€‚
4.  è¿™æ · GCC ç¼–è¯‘æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨æŠŠè¿™ä¸‰ä¸ªåº“ç¼–è¯‘è¿›è‡ªå·±çš„èº«ä½“é‡Œï¼ˆé™æ€é“¾æ¥ï¼‰ã€‚

#### ğŸ› ï¸ ä»»åŠ¡å…­ï¼šç¼–å†™ GCC (Pass 1) æ„å»ºè„šæœ¬

è¯·å‚è€ƒåˆšæ‰ Binutils çš„è„šæœ¬ç»“æ„ï¼Œç¼–å†™ `build_gcc_pass1.sh`ã€‚

**è„šæœ¬æ ¸å¿ƒé€»è¾‘ï¼ˆè¯·ä¸€æ­¥æ­¥å®ç°ï¼‰ï¼š**

1.  **å‡†å¤‡å·¥ä½œ**ï¼ˆRoot ç”Ÿæˆè„šæœ¬ -\> åˆ‡æ¢ LFS ç”¨æˆ· -\> æ£€æŸ¥ç¯å¢ƒï¼‰ï¼Œè¿™éƒ¨åˆ†å¤åˆ¶ä¹‹å‰çš„é€»è¾‘ã€‚
2.  **è§£å‹ GCC**ï¼š
      * æ‰¾åˆ° `gcc-14.2.0.tar.xz` å¹¶è§£å‹ã€‚
      * è¿›å…¥ `gcc-14.2.0` ç›®å½•ã€‚
3.  **è§£å‹ä¾èµ–åº“ï¼ˆéš¾ç‚¹ï¼‰**ï¼š
      * **æ³¨æ„**ï¼šä½ ç°åœ¨åº”è¯¥åœ¨ GCC çš„æºç ç›®å½•é‡Œé¢ï¼
      * è§£å‹ `mpfr-*.tar.xz`ï¼Œ**å¹¶å°†è§£å‹å‡ºçš„ç›®å½•é‡å‘½åä¸º `mpfr`**ã€‚
      * è§£å‹ `gmp-*.tar.xz`ï¼Œ**å¹¶å°†è§£å‹å‡ºçš„ç›®å½•é‡å‘½åä¸º `gmp`**ã€‚
      * è§£å‹ `mpc-*.tar.gz`ï¼Œ**å¹¶å°†è§£å‹å‡ºçš„ç›®å½•é‡å‘½åä¸º `mpc`**ã€‚
      * *æç¤ºï¼šä½¿ç”¨ `mv -v mpfr-4.2.1 mpfr` è¿™æ ·çš„å‘½ä»¤ã€‚*
4.  **æ ¹æ® LFS æ‰‹å†Œä¿®æ­£ 64 ä½åº“è·¯å¾„ï¼ˆå…³é”®ï¼‰**ï¼š
      * åœ¨ x86\_64 æœºå™¨ä¸Šï¼ŒGCC é»˜è®¤ä¼šå»æ‰¾ `/lib64`ã€‚ä¸ºäº†è®©å®ƒä¹–ä¹–ç”¨æˆ‘ä»¬çš„ `/tools/lib`ï¼Œéœ€è¦æ‰§è¡Œè¿™è¡Œå‘½ä»¤ï¼ˆåŸæ ·å¤åˆ¶ï¼‰ï¼š
    <!-- end list -->
    ```bash
    case $(uname -m) in
      x86_64)
        sed -e '/m64=/s/lib64/lib/' \
            -i.orig gcc/config/i386/t-linux64
     ;;
    esac
    ```
5.  **åˆ›å»ºæ„å»ºç›®å½•**ï¼š
      * `mkdir -v build`
      * `cd build`
6.  **é…ç½® (Configure)**ï¼š
      * å‚æ•°éå¸¸å¤šï¼Œè¯·ä»”ç»†æ ¸å¯¹ï¼Œæ¼ä¸€ä¸ªéƒ½å¯èƒ½å¯¼è‡´åç»­ç« èŠ‚å…¨å´©ï¼š
    <!-- end list -->
    ```bash
    ../configure                                       \
        --target=$LFS_TGT                              \
        --prefix=/tools                                \
        --with-glibc-version=2.40                      \
        --with-sysroot=$LFS                            \
        --with-newlib                                  \
        --without-headers                              \
        --enable-default-pie                           \
        --enable-default-ssp                           \
        --disable-nls                                  \
        --disable-shared                               \
        --disable-multilib                             \
        --disable-threads                              \
        --disable-libatomic                            \
        --disable-libgomp                              \
        --disable-libquadmath                          \
        --disable-libssp                               \
        --disable-libvtv                               \
        --disable-libstdcxx                            \
        --enable-languages=c,c++
    ```
      * *è§£é‡Š*ï¼šæˆ‘ä»¬ç°åœ¨è¿˜ä¸æƒ³ç¼–è¯‘å®Œæ•´çš„ GCCï¼ˆå› ä¸ºè¿˜æ²¡æœ‰ Glibcï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¦ç”¨äº†çº¿ç¨‹ã€å…±äº«åº“ç­‰é«˜çº§åŠŸèƒ½ï¼Œåªç¼–è¯‘æœ€åŸºç¡€çš„ C/C++ ç¼–è¯‘å™¨ã€‚
7.  **ç¼–è¯‘ä¸å®‰è£…**ï¼š
      * `make` (è€—æ—¶è¾ƒé•¿ï¼Œå»ºè®® `make -j4` æˆ–æ›´å¤š)ã€‚
      * `make install`ã€‚
8.  **ä¿®æ­£å¤´æ–‡ä»¶ï¼ˆæœ€åä¸€æ­¥ï¼‰**ï¼š
      * GCC ç¼–è¯‘å®Œåï¼Œéœ€è¦åœ¨è¿™ä¸ªæ–°ç”Ÿæˆçš„ç¼–è¯‘å™¨é‡Œåˆ›å»ºä¸€ä¸ª `limits.h` æ–‡ä»¶ã€‚
    <!-- end list -->
    ```bash
    cd ..
    cat gcc/limitx.h gcc/glimits.h gcc/limity.h > \
      `dirname $($LFS_TGT-gcc -print-libgcc-file-name)`/include/limits.h
    ```
9.  **æ¸…ç†**ï¼š
      * åˆ é™¤æ•´ä¸ª `gcc-14.2.0` ç›®å½•ã€‚

**æŒ‘æˆ˜æç¤º**ï¼š

  * å¦‚ä½•åœ¨è„šæœ¬é‡Œè‡ªåŠ¨æ‰¾åˆ° mpfr/gmp/mpc çš„ç‰ˆæœ¬å·å¹¶æ­£ç¡®è§£å‹ï¼Ÿ(ä½ å¯ä»¥å†™æ­»ç‰ˆæœ¬å·ï¼Œæˆ–è€…ç”¨é€šé…ç¬¦ `ls ../mpfr-*.tar.xz` æŠ€å·§)ã€‚
  * è¿™ä¸€æ­¥ç¼–è¯‘æ—¶é—´æ¯”è¾ƒé•¿ï¼ˆå–å†³äºä½ çš„ç”µè„‘æ€§èƒ½ï¼Œå¯èƒ½éœ€è¦ 10-30 åˆ†é’Ÿï¼‰ã€‚

**è¯·å°è¯•ç¼–å†™ `build_gcc_pass1.sh`ï¼å¦‚æœä½ æå®šäº†è¿™ä¸ªï¼Œä¸´æ—¶å·¥å…·é“¾æœ€éš¾çš„ä¸€å…³å°±è¿‡äº†ã€‚**