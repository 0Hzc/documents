### 第四阶段：文本处理三剑客 (The Text Processors)

LFS 的构建过程，本质上就是把源码包下载下来，修改一下配置（改掉写死的路径、修复 Bug），然后编译。

因为我们不能手动打开记事本去改几千个文件，所以我们需要\*\*“外科手术刀”\*\* —— **Sed**。

#### 1\. Sed (Stream Editor) —— 核心中的核心

在 LFS 手册中，你几乎会在每一章都看到 `sed`。它的作用是：**不打开文件，直接修改文件内容。**

**基本语法：**

```bash
sed -i 's/旧内容/新内容/g' 文件名
```

  * **`-i` (in-place)**：直接修改源文件（如果没有这个参数，它只会把修改结果输出到屏幕，文件本身不变）。
  * **`s` (substitute)**：替换命令。
  * **`g` (global)**：全局替换（一行里如果出现两次，两次都换；不加 `g` 只换第一次）。

#### 2\. 分隔符的艺术 (LFS 必考题)

通常我们用 `/` 做分隔符：`s/abc/xyz/g`。
**但是**，如果要修改的是**文件路径**，比如把 `/usr/lib` 改成 `/tools/lib`，用 `/` 就会变成这样：
`s//usr/lib//tools/lib/g` -\> **报错！** Shell 会看晕。

**解决方案**：Sed 允许你用**任意字符**当分隔符。在处理路径时，我们通常用 `#` 或 `@`。

```bash
sed -i 's@/usr/lib@/tools/lib@g' filename
```

-----

### 🛠️ 任务五：Sed 手术刀练习

为了模拟 LFS 中修改 `Makefile` 路径的场景，请编写一个脚本 `sed_practice.sh`。

**需求如下：**

1.  **准备素材**：
      * 创建一个名为 `config.mk` 的假配置文件。
      * 内容使用 `cat` 生成（或者 echo），包含一行：`INSTALL_DIR = /usr/local/bin`。
2.  **查看原文件**：使用 `cat` 输出修改前的内容。
3.  **执行手术**：
      * 使用 `sed` 命令，将文件中的 `/usr/local/bin` 修改为 `/tools/bin`。
      * **要求**：必须使用 `@` 作为分隔符（不要用 `/` 转义）。
      * **要求**：直接修改文件 (`-i`)。
4.  **验证结果**：
      * 再次使用 `cat` 输出修改后的内容。
      * 如果输出的是 `INSTALL_DIR = /tools/bin`，则手术成功。

**这是 LFS 中最常用的“修改源码”手段，请务必掌握。期待你的代码！**